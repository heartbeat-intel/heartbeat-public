---
import VideoPlayer from '../react/VideoPlayer';

interface Props {
  variant?: 'home' | 'exchange' | 'publisher' | 'content';
  showBack?: boolean;
  backHref?: string;
  backLabel?: string;
  maxWidth?: string;
}

const {
  variant = 'home',
  showBack = false,
  backHref = '/exchange',
  backLabel = 'Back',
  maxWidth = '1200px',
} = Astro.props;
---

<header class="fixed top-0 left-0 right-0 z-50 nav-blur bg-hb-black-0/80 border-b border-white/5">
  <div class={`max-w-[${maxWidth}] mx-auto px-6 h-16 flex items-center justify-between`}>
    <!-- Left side -->
    <div class="flex items-center gap-4">
      {showBack && (
        <a
          href={backHref}
          class="flex items-center gap-2 text-sm text-white/40 hover:text-white transition-colors"
        >
          <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
          </svg>
          {backLabel}
        </a>
      )}
      {showBack && <div class="h-6 w-px bg-white/10"></div>}
      <a href="/" class="flex items-center gap-2">
        <img
          src="/images/logos/heartbeatLogoBlack.svg"
          alt="Heartbeat"
          class="h-6 logo-theme-aware"
          width="120"
          height="24"
        />
      </a>
    </div>

    <!-- Center nav (home/exchange only) -->
    {(variant === 'home' || variant === 'exchange') && (
      <nav class="hidden md:flex items-center gap-8">
        {variant === 'home' && (
          <>
            <a href="#how-it-works" class="text-sm text-white/40 hover:text-white transition-colors">How It Works</a>
            <a href="#publishers" class="text-sm text-white/40 hover:text-white transition-colors">Publishers</a>
            <a href="/exchange" class="text-sm text-white/40 hover:text-white transition-colors">Exchange</a>
          </>
        )}
        {variant === 'exchange' && (
          <>
            <a href="/" class="text-sm text-white/40 hover:text-white transition-colors">Home</a>
            <a href="#publishers" class="text-sm text-white/40 hover:text-white transition-colors">Publishers</a>
            <a href="#trending" class="text-sm text-white/40 hover:text-white transition-colors">Trending</a>
          </>
        )}
      </nav>
    )}

    <!-- Right side -->
    <div class="flex items-center gap-3">
      <slot name="right-actions" />

      <!-- Theme toggle -->
      <button
        data-theme-toggle
        class="w-9 h-9 flex items-center justify-center rounded-lg text-white/40 hover:text-white hover:bg-white/5 transition-colors"
        aria-label="Toggle light/dark mode"
      >
        <!-- Sun icon (shown in dark mode → click to go light) -->
        <svg data-icon="sun" class="w-[18px] h-[18px]" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />
        </svg>
        <!-- Moon icon (shown in light mode → click to go dark) -->
        <svg data-icon="moon" class="w-[18px] h-[18px]" style="display:none" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1.5">
          <path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" />
        </svg>
      </button>

      {(variant === 'home' || variant === 'exchange') && (
        <>
          <VideoPlayer client:visible />
          <a
            href="mailto:human@heartbeatintel.com"
            class="inline-flex items-center gap-2 bg-hb-orange-main text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-hb-orange-1 transition-colors"
          >
            Book a Demo
          </a>
        </>
      )}
    </div>
  </div>
</header>
